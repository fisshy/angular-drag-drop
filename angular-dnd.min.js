angular.module("dragAndDrop",[]).directive("drag",["dndApi",function(a){var b=[],c=function(a,b){if(b>5)return!1;var d=a.parent();return d.hasClass("drop")?d[0]:(b++,c(d,b))},d=["start","end","ngModel"];return{restrict:"A",link:function(e,f,g){var h={};if(angular.forEach(d,function(a){g[a]&&(h[a]=e.$eval(g[a]))}),!angular.isUndefined(h.ngModel)){var i=f[0];i.addEventListener("dragstart",function(d){0===b.length&&(b=document.querySelectorAll(".drop")),angular.forEach(a.areas(),function(a){a[0]!==c(f,0)&&a.addClass("draging")}),f.addClass("on-drag"),a.setData(h.ngModel,f),(d.originalEvent||d).dataTransfer.effectAllowed="move",(d.originalEvent||d).dataTransfer.setData("text","test"),angular.isFunction(h.start)&&e.$apply(function(){h.start(a.getData(),f)})}),i.addEventListener("dragend",function(){f.removeClass("on-drag"),angular.forEach(a.areas(),function(a){a.removeClass("draging")}),angular.isFunction(h.end)&&e.$apply(function(){h.end(a.getData(),f)}),a.clear()}),i.draggable=!0,f.addClass("drag")}}}}]).directive("drop",["dndApi",function(a){var b=["drop","enter","leave"];return{link:function(c,d,e){var f={},g=d[0],h=g.offsetLeft,i=h+g.offsetWidth,j=g.offsetTop,k=j+g.offsetHeight;angular.forEach(b,function(a){e[a]&&(f[a]=c.$eval(e[a]))}),a.addArea(d),g.addEventListener("drop",function(b){b.preventDefault(),b.stopPropagation()&&b.preventDefault();var e=a.getData();d.hasClass("draging")&&(angular.isFunction(f.drop)&&c.$apply(function(){f.drop(e.data,e.element)}),angular.forEach(a.areas(),function(a){a.addClass("draging")}),a.clear())}),g.addEventListener("dragenter",function(b){g===b.target&&angular.isFunction(f.enter)&&c.$apply(function(){var b=a.getData();f.enter(b.data,b.element)})}),g.addEventListener("dragleave",function(b){(b.x<h||b.x>i||b.y<j||b.y>k)&&angular.isFunction(f.leave)&&c.$apply(function(){var b=a.getData();f.leave(b.data,b.element)})}),g.addEventListener("dragover",function(a){return a.preventDefault&&a.preventDefault(),!1}),d.addClass("drop")}}}]).factory("dndApi",function(){var a={dragObject:{}},b=[];return{addArea:function(a){b.push(a)},areas:function(){return b},setData:function(b,c){a.drag={data:b,element:c}},clear:function(){delete a.drag},getData:function(){return a.drag}}});
//# sourceMappingURL=angular-dnd.min.js.map